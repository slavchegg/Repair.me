{"version":3,"sources":["/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/auth-routing.module.ts","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/auth.module.ts","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.css","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.html","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.ts","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.css","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.html","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.ts","/Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/unregistered.guard.ts"],"names":[],"mappings":"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","file":"7.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { RegisteredGuard } from './registered.guard';\nimport { UnregisteredGuard } from './unregistered.guard';\nimport { LoginComponent } from './login/login.component';\nimport { LogoutComponent } from './logout/logout.component';\n\nconst appRoutes: Routes = [\n  { path: '', children: [\n    { path: 'login', component: LoginComponent, canActivate: [UnregisteredGuard]},\n    { path: 'logout', component: LogoutComponent, canActivate: [RegisteredGuard] }\n  ]}\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(appRoutes)\n  ],\n  exports: [\n    RouterModule\n  ],\n  providers: [RegisteredGuard, UnregisteredGuard]\n})\nexport class AuthRoutingModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/auth-routing.module.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\n\nimport { AuthRoutingModule } from './auth-routing.module';\nimport { LoginComponent } from './login/login.component';\nimport { LogoutComponent } from './logout/logout.component';\nimport { AuthService } from './auth.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AuthRoutingModule,\n    FormsModule,\n    HttpModule\n  ],\n  declarations: [LoginComponent, LogoutComponent],\n  providers: [AuthService]\n})\nexport class AuthModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/auth.module.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div.centered {\\r\\n  width: 200px;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.css\n// module id = ../../../../../src/app/login/login.component.css\n// module chunks = 7","module.exports = \"<h1>Вход</h1>\\n<div class=\\\"centered\\\">\\n  <form #loginform=\\\"ngForm\\\" (ngSubmit)=\\\"login()\\\">\\n    <p>Почта<br><input type='email'[(ngModel)]=\\\"credentials.username\\\" name=\\\"username\\\"></p>\\n    <p>Пароль<br><input type=\\\"password\\\" [(ngModel)]=\\\"credentials.password\\\" name=\\\"password\\\"></p>\\n    <p><input type=\\\"submit\\\" value=\\\"Войти\\\" [disabled]=\\\"!loginform.valid\\\"></p>\\n  </form>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.html\n// module id = ../../../../../src/app/login/login.component.html\n// module chunks = 7","import { Component, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\n\nimport { Settings } from '../settings';\nimport { AuthService } from '../auth.service';\nimport { AppComponent } from '../app.component';\nimport {UsersService} from '../users.service';\n\n@Component({\n  selector: 'plants-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['../user-edit/form.css', './login.component.css'],\n})\nexport class LoginComponent implements OnInit {\n  credentials = {username: '', password: ''}; // name is mail, sent to registration/login\n\n  constructor(private as: AuthService, private us: UsersService, private router: Router, private title: Title,\n  private ac: AppComponent) { }\n\n  ngOnInit() {\n    this.title.setTitle('Вход :: ' + Settings.title);\n  }\n\n  login(): void {\n    this.as.login(this.credentials).subscribe((role: string) => {\n      if (role !== 'guest') {\n        this.router.navigate(['']);\n        console.log(role);\n        this.ac.nav.refreshRole();\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/login/login.component.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div.centered {\\r\\n  width: 100px;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.css\n// module id = ../../../../../src/app/logout/logout.component.css\n// module chunks = 7","module.exports = \"<h1>Выход</h1>\\n<div class=\\\"centered\\\">\\n  <form (ngSubmit)=\\\"logout()\\\">\\n    <p><input type=\\\"submit\\\" value=\\\"Выйти\\\"></p>\\n  </form>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.html\n// module id = ../../../../../src/app/logout/logout.component.html\n// module chunks = 7","import { Component, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\n\nimport { Settings } from '../settings';\nimport { AuthService } from '../auth.service';\nimport { AppComponent } from '../app.component';\n\n@Component({\n  selector: 'plants-logout',\n  templateUrl: './logout.component.html',\n  styleUrls: ['../user-edit/form.css', './logout.component.css']\n})\nexport class LogoutComponent implements OnInit {\n  constructor(private as: AuthService, private router: Router, private title: Title,\n  private ac: AppComponent) { }\n\n  ngOnInit() {\n    this.title.setTitle('Выход :: ' + Settings.title);\n  }\n\n  logout(): void {\n    this.as.logout().subscribe();\n      if (sessionStorage.getItem('role') === 'guest') {\n        this.router.navigate(['']);\n        this.ac.nav.refreshRole();\n      }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/logout/logout.component.ts","import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\n\nimport { AuthService } from './auth.service';\n\n@Injectable()\nexport class UnregisteredGuard implements CanActivate {\n  constructor(private as: AuthService) { }\n  \n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n    return this.as.getRole().map((role: string) => role === 'guest');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/viacheslavtimofeev/Projects/backup/development/plants/src/app/unregistered.guard.ts"],"sourceRoot":"webpack:///"}